<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="parkour.js"></script>
  <script>
    function initParkour() {
      var parkour = new Parkour('parkour', {
        size: {                 //各尺寸配置
          container: {          //容器尺寸
            width: 400,       
            height: 300
          },
          protagonist: {        //主角尺寸
            width: 16,
            height: 32
          },
          awards: [             //奖品尺寸(多种)
            {
              width: 10,
              height: 15
            }
          ],
          background: {         //背景尺寸
            width: 400
          },
          tile: {               //地块尺寸(所有地块的宽度需要一致)
            width: 32           
          },
          tiles: [              //地块尺寸(不同高度的地块的设置)
            {     
              height: 32
            }
          ],
        },
        assets: {               //各资源的配置
          protagonist: {        //主角资源配置
            staying: 'images/protagonist-staying.png',         //
            running: [          //奔跑动作的帧图片
              'images/protagonist-running-1.png',
              'images/protagonist-running-2.png',
              'images/protagonist-running-3.png'
            ],
            jumping: 'images/protagonist-jumping.png'  //跳跃动作的图片
          },
          background: [         //背景图,(背景滚动时可以多张首尾衔接)
            '....jpg'
          ],
          tiles: [              //地块图片资源
            {
              left: [           //左侧地块图片资源(多个时每次随机一个)
                'images/tile-left.png'
              ],
              middle: [         //中间地块图片资源(多个时每次随机一个)
                'images/tile-middle.png'
              ],
              right: [          //右侧地块图片资源(多个时每次随机一个)
                'images/tile-right.png'
              ]
            }
          ],
          awards: [
            {
              normal: 'images/award-1.png' //正常状态下的奖品图片
            }
          ]
        },
        config: {
          fps: 25,              //帧率
          protagonist: {        //主角配置
            run: {              //奔跑配置
              start: 100,       //开始位置
              speed: 4          //奔跑速度(可以接受方法,根据当前的得分和已用时长跳转速度,function(score,time))
            },
            jump: {             //跳跃配置
              power: 8,         //跳跃力度(px/f)
              gravity: 0.4      //重力加速度(px/f²)
            }
          },
          awards: [             //奖品配置
            {
              score: 1          //奖品获得的积分配置
            }
          ],
          win: {                //胜利条件
            time: Infinity,     //到达指定时间获胜
            score: 5     //获得指定积分获胜
          },
          background: {
            speed: 10           //背景卷动的速度
          }
        }
      });
      parkour.onInited = function() {
        parkour.start();
      }
      parkour.onScoreChange = function(score, max) {
        document.getElementById('score').innerHTML = score + '/' + max;
      }
      parkour.onWin = function() {
        alert('获胜');
      }
      parkour.onLose = function() {
        alert('游戏结束');
        parkour = initParkour();
      }
      document.getElementById('parkour').onclick = function() {
        parkour.jump();
      }
      return parkour;
    }

    window.onload = function() {
      initParkour();
    }
  </script>
</head>
<body>
  <div id="parkour">
    
  </div>
  <div id="score"></div>
</body>
</html>